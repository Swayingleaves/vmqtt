server:
  port: 8081
  shutdown: graceful

spring:
  application:
    name: vmqtt-fe-simple

# gRPC服务器配置
grpc:
  server:
    port: 9091

# V-MQTT FE配置
vmqtt:
  fe:
    node-id: fe-simple
    mqtt:
      port: 1883
      max-connections: 10000
      keep-alive-timeout: 60
    cluster:
      gossip:
        enabled: false  # 禁用Gossip协议
    gossip:
      port: 7946
      interval: 5000
      timeout: 10000
      failure-threshold: 3
      seed-nodes: 
    backend:
      heartbeat-timeout: 30000
      failure-threshold: 3
      check-interval: 10000
    grpc:
      port: ${grpc.server.port}
      connection-timeout: 5000
      call-timeout: 10000
    registration:
      interval: 60000
      retry-delay: 5000
    # 订阅同步配置
    subscription:
      snapshot-interval: 30000
      snapshot-path: data/subscriptions/fe-simple.snapshot
      max-clients: 10000
      eventbus-port: 7949
      batch-size: 100
      flush-interval: 500
    # 故障转移配置
    failover:
      check-interval: 5000
      timeout: 15000
      retry-attempts: 3
      recovery-interval: 30000

# 管理端点配置
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: always

logging:
  level:
    root: INFO
    com.vmqtt: DEBUG
  file:
    path: logs/fe-simple
  pattern:
    file: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n" 